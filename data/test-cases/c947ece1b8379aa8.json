{"uid":"c947ece1b8379aa8","name":"Запрос closeposition: проверка работы запроса.","fullName":"Antelope.test_closeposition#test_closeposition_1","historyId":"5476b28046d437ce5f95729d3d557b28","time":{"start":1604317392660,"stop":1604317393664,"duration":1004},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100\n            - пополняем ему баланс на 10.000.\n            - открываем 2 позиции.\n        Тест:\n            Шаг1: закрываем позицию запросом closeposition.\n            Шаг2: проверяем наличие ордера через запрос getopenpositionsforlogin\n        Tear down: удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100\n        - пополняем ему баланс на 10.000.\n        - открываем 2 позиции.\n    Тест:\n        Шаг1: закрываем позицию запросом closeposition.\n        Шаг2: проверяем наличие ордера через запрос getopenpositionsforlogin\n    Tear down: удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert ('102978' != '' and '102979' == ''\n  + 102979)","statusTrace":"position_open = {'order1': '102978', 'order2': '102979'}\n\n    @allure.title(\"Запрос closeposition: проверка работы запроса.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_closeposition_1(position_open):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100\n                - пополняем ему баланс на 10.000.\n                - открываем 2 позиции.\n            Тест:\n                Шаг1: закрываем позицию запросом closeposition.\n                Шаг2: проверяем наличие ордера через запрос getopenpositionsforlogin\n            Tear down: удаление аккаунта\n        \"\"\"\n        with allure.step('Закрываем позицию запросом closeposition.'):\n            closeposition = wik5.request(wik_mt5_addr, 'closeposition', position= position_open['order1'])\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос closeposition: \", closeposition)\n            time.sleep(1)\n        with allure.step('Проверка закрытия позиции'):\n            getopenpositionsforlogin = wik5.request(wik_mt5_addr, 'getopenpositionsforlogin', login=100)\n>           assert position_open['order1'] != getopenpositionsforlogin[\"size\"][0][\"position\"] and position_open['order2'] == getopenpositionsforlogin[\"size\"][0][\"position\"]\nE           AssertionError: assert ('102978' != '' and '102979' == ''\nE             + 102979)\n\nAntelope\\test_closeposition.py:52: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"position_open","time":{"start":1604317392641,"stop":1604317392660,"duration":19},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317392641,"stop":1604317392650,"duration":9},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317392644,"stop":1604317392646,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем ордер","time":{"start":1604317392646,"stop":1604317392650,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100\n            - пополняем ему баланс на 10.000.\n            - открываем 2 позиции.\n        Тест:\n            Шаг1: закрываем позицию запросом closeposition.\n            Шаг2: проверяем наличие ордера через запрос getopenpositionsforlogin\n        Tear down: удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert ('102978' != '' and '102979' == ''\n  + 102979)","statusTrace":"position_open = {'order1': '102978', 'order2': '102979'}\n\n    @allure.title(\"Запрос closeposition: проверка работы запроса.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_closeposition_1(position_open):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100\n                - пополняем ему баланс на 10.000.\n                - открываем 2 позиции.\n            Тест:\n                Шаг1: закрываем позицию запросом closeposition.\n                Шаг2: проверяем наличие ордера через запрос getopenpositionsforlogin\n            Tear down: удаление аккаунта\n        \"\"\"\n        with allure.step('Закрываем позицию запросом closeposition.'):\n            closeposition = wik5.request(wik_mt5_addr, 'closeposition', position= position_open['order1'])\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос closeposition: \", closeposition)\n            time.sleep(1)\n        with allure.step('Проверка закрытия позиции'):\n            getopenpositionsforlogin = wik5.request(wik_mt5_addr, 'getopenpositionsforlogin', login=100)\n>           assert position_open['order1'] != getopenpositionsforlogin[\"size\"][0][\"position\"] and position_open['order2'] == getopenpositionsforlogin[\"size\"][0][\"position\"]\nE           AssertionError: assert ('102978' != '' and '102979' == ''\nE             + 102979)\n\nAntelope\\test_closeposition.py:52: AssertionError","steps":[{"name":"Закрываем позицию запросом closeposition.","time":{"start":1604317392660,"stop":1604317393663,"duration":1003},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверка закрытия позиции","time":{"start":1604317393663,"stop":1604317393664,"duration":1},"status":"failed","statusMessage":"AssertionError: assert ('102978' != '' and '102979' == ''\n  + 102979)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_closeposition.py\", line 52, in test_closeposition_1\n    assert position_open['order1'] != getopenpositionsforlogin[\"size\"][0][\"position\"] and position_open['order2'] == getopenpositionsforlogin[\"size\"][0][\"position\"]\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[{"uid":"d1c1e43f02253f9c","name":"stdout","source":"d1c1e43f02253f9c.txt","type":"text/plain","size":180}],"parameters":[],"stepsCount":2,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"position_open::0","time":{"start":1604317393675,"stop":1604317393677,"duration":2},"status":"passed","steps":[{"name":"Удаление созданных аккаунтов","time":{"start":1604317393675,"stop":1604317393677,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"labels":[{"name":"severity","value":"blocker"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_closeposition"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_closeposition"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[{"uid":"c274087c30a4b3dd","status":"failed","statusDetails":"AssertionError: assert ('102808' != '' and '102809' == ''\n  + 102809)","time":{"start":1604313155187,"stop":1604313156191,"duration":1004}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke"]},"source":"c947ece1b8379aa8.json","parameterValues":[]}