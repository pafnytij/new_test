{"uid":"36079383254bc6c0","name":"Запрос transferbalance: проверка работы: перевод средств с одного аккаунта на два аккаунта, разные валюты.","fullName":"Antelope.test_transferbalance#test_transferbalance_5","historyId":"73b3efe95e483f82b9cccad546c8e331","time":{"start":1604317817520,"stop":1604317822533,"duration":5013},"description":"\n    Описание шагов:\n        Setup: создаём аккаунты с логином 100,103 - USD,105-EUR.\n            - Пополняем баланс аккаунта 100\n        Тест:\n            Шаг0: вбрасываем котировку EURUSD bid=0.5000, ask=0.5000\n            Шаг1: запрос servertime - параметр from для getbalancesoperations\n            Шаг2: отправляем запрос transferbalance на перевод средств с 100 аккаунта на 103 и 105 суммарно 100$\n            Шаг3: проверка ответа\n            Шаг4: запрос servertime - параметр to для getbalancesoperations\n            Шаг5: Запрос getbalancesoperations для from_logins - 100 аккаунта\n            Шаг6: проверяем данные\n            Шаг7: Запрос getbalancesoperations для receiver_logins - 103 аккаунта\n            Шаг8: проверяем данные\n            Шаг9: Запрос getbalancesoperations для receiver_logins - 105 аккаунта\n            Шаг10: проверяем данные\n        Tear down:\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунты с логином 100,103 - USD,105-EUR.\n        - Пополняем баланс аккаунта 100\n    Тест:\n        Шаг0: вбрасываем котировку EURUSD bid=0.5000, ask=0.5000\n        Шаг1: запрос servertime - параметр from для getbalancesoperations\n        Шаг2: отправляем запрос transferbalance на перевод средств с 100 аккаунта на 103 и 105 суммарно 100$\n        Шаг3: проверка ответа\n        Шаг4: запрос servertime - параметр to для getbalancesoperations\n        Шаг5: Запрос getbalancesoperations для from_logins - 100 аккаунта\n        Шаг6: проверяем данные\n        Шаг7: Запрос getbalancesoperations для receiver_logins - 103 аккаунта\n        Шаг8: проверяем данные\n        Шаг9: Запрос getbalancesoperations для receiver_logins - 105 аккаунта\n        Шаг10: проверяем данные\n    Tear down:\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert ('1' == '-3'\n  - -3\n  + 1)","statusTrace":"create_account = ()\n\n    @allure.title(\"Запрос transferbalance: проверка работы: перевод средств с одного аккаунта на два аккаунта, разные валюты.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_transferbalance_5(create_account):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунты с логином 100,103 - USD,105-EUR.\n                - Пополняем баланс аккаунта 100\n            Тест:\n                Шаг0: вбрасываем котировку EURUSD bid=0.5000, ask=0.5000\n                Шаг1: запрос servertime - параметр from для getbalancesoperations\n                Шаг2: отправляем запрос transferbalance на перевод средств с 100 аккаунта на 103 и 105 суммарно 100$\n                Шаг3: проверка ответа\n                Шаг4: запрос servertime - параметр to для getbalancesoperations\n                Шаг5: Запрос getbalancesoperations для from_logins - 100 аккаунта\n                Шаг6: проверяем данные\n                Шаг7: Запрос getbalancesoperations для receiver_logins - 103 аккаунта\n                Шаг8: проверяем данные\n                Шаг9: Запрос getbalancesoperations для receiver_logins - 105 аккаунта\n                Шаг10: проверяем данные\n            Tear down:\n                - Удаление аккаунта\n        \"\"\"\n        size_0 = {'login': '100', 'balance': '900', 'credit': '0', 'equity': '900', 'margin': '0', 'margin_free': '900',\n                  'success_flag': '1'}\n        size_1 = {'login': '103', 'balance': '50', 'credit': '0', 'equity': '50', 'margin': '0', 'margin_free': '50',\n                  'success_flag': '1'}\n        size_2 = {'login': '105', 'balance': '100', 'credit': '0', 'equity': '100', 'margin': '0', 'margin_free': '100',\n                  'success_flag': '1'}\n    \n        with allure.step('Вбрасываем котировку'):\n            addquote_EURUSD = wik5.request(wik_mt5_addr, 'addquote', symbol='EURUSD', bid=0.5000, ask=0.5)\n        with allure.step('Запрос servertime - параметр from для getbalancesoperations'):\n            servertime_from = wik5.request(wik_mt5_addr, 'servertime')\n            from_1 = int(servertime_from['time'])\n            time.sleep(5)\n        with allure.step('Запрос transferbalance'):\n            transferbalance = wik5.request(wik_mt5_addr, 'transferbalance', from_logins = 100, receiver_logins= \"103;105\", amount=100, from_comment = \"from_comment\", receiver_comment = \"receiver_comment\")\n            # Данные для отчёта: stdout\n            print(\"Ответ запроса transferbalance : \", transferbalance)\n            with allure.step('Проверка ответа'):\n>               assert \"1\" == transferbalance[\"result\"] and size_0 == transferbalance[\"size\"][0] and size_1 == transferbalance[\"size\"][1] and size_2 == transferbalance[\"size\"][2]\nE               AssertionError: assert ('1' == '-3'\nE                 - -3\nE                 + 1)\n\nAntelope\\test_transferbalance.py:302: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"create_account","time":{"start":1604317812500,"stop":1604317817520,"duration":5020},"status":"passed","steps":[{"name":"Создаем группу с валютой EUR","time":{"start":1604317812500,"stop":1604317812501,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Создаем аккаунт","time":{"start":1604317812501,"stop":1604317817520,"duration":5019},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317812515,"stop":1604317817520,"duration":5005},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунты с логином 100,103 - USD,105-EUR.\n            - Пополняем баланс аккаунта 100\n        Тест:\n            Шаг0: вбрасываем котировку EURUSD bid=0.5000, ask=0.5000\n            Шаг1: запрос servertime - параметр from для getbalancesoperations\n            Шаг2: отправляем запрос transferbalance на перевод средств с 100 аккаунта на 103 и 105 суммарно 100$\n            Шаг3: проверка ответа\n            Шаг4: запрос servertime - параметр to для getbalancesoperations\n            Шаг5: Запрос getbalancesoperations для from_logins - 100 аккаунта\n            Шаг6: проверяем данные\n            Шаг7: Запрос getbalancesoperations для receiver_logins - 103 аккаунта\n            Шаг8: проверяем данные\n            Шаг9: Запрос getbalancesoperations для receiver_logins - 105 аккаунта\n            Шаг10: проверяем данные\n        Tear down:\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert ('1' == '-3'\n  - -3\n  + 1)","statusTrace":"create_account = ()\n\n    @allure.title(\"Запрос transferbalance: проверка работы: перевод средств с одного аккаунта на два аккаунта, разные валюты.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_transferbalance_5(create_account):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунты с логином 100,103 - USD,105-EUR.\n                - Пополняем баланс аккаунта 100\n            Тест:\n                Шаг0: вбрасываем котировку EURUSD bid=0.5000, ask=0.5000\n                Шаг1: запрос servertime - параметр from для getbalancesoperations\n                Шаг2: отправляем запрос transferbalance на перевод средств с 100 аккаунта на 103 и 105 суммарно 100$\n                Шаг3: проверка ответа\n                Шаг4: запрос servertime - параметр to для getbalancesoperations\n                Шаг5: Запрос getbalancesoperations для from_logins - 100 аккаунта\n                Шаг6: проверяем данные\n                Шаг7: Запрос getbalancesoperations для receiver_logins - 103 аккаунта\n                Шаг8: проверяем данные\n                Шаг9: Запрос getbalancesoperations для receiver_logins - 105 аккаунта\n                Шаг10: проверяем данные\n            Tear down:\n                - Удаление аккаунта\n        \"\"\"\n        size_0 = {'login': '100', 'balance': '900', 'credit': '0', 'equity': '900', 'margin': '0', 'margin_free': '900',\n                  'success_flag': '1'}\n        size_1 = {'login': '103', 'balance': '50', 'credit': '0', 'equity': '50', 'margin': '0', 'margin_free': '50',\n                  'success_flag': '1'}\n        size_2 = {'login': '105', 'balance': '100', 'credit': '0', 'equity': '100', 'margin': '0', 'margin_free': '100',\n                  'success_flag': '1'}\n    \n        with allure.step('Вбрасываем котировку'):\n            addquote_EURUSD = wik5.request(wik_mt5_addr, 'addquote', symbol='EURUSD', bid=0.5000, ask=0.5)\n        with allure.step('Запрос servertime - параметр from для getbalancesoperations'):\n            servertime_from = wik5.request(wik_mt5_addr, 'servertime')\n            from_1 = int(servertime_from['time'])\n            time.sleep(5)\n        with allure.step('Запрос transferbalance'):\n            transferbalance = wik5.request(wik_mt5_addr, 'transferbalance', from_logins = 100, receiver_logins= \"103;105\", amount=100, from_comment = \"from_comment\", receiver_comment = \"receiver_comment\")\n            # Данные для отчёта: stdout\n            print(\"Ответ запроса transferbalance : \", transferbalance)\n            with allure.step('Проверка ответа'):\n>               assert \"1\" == transferbalance[\"result\"] and size_0 == transferbalance[\"size\"][0] and size_1 == transferbalance[\"size\"][1] and size_2 == transferbalance[\"size\"][2]\nE               AssertionError: assert ('1' == '-3'\nE                 - -3\nE                 + 1)\n\nAntelope\\test_transferbalance.py:302: AssertionError","steps":[{"name":"Вбрасываем котировку","time":{"start":1604317817520,"stop":1604317817523,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрос servertime - параметр from для getbalancesoperations","time":{"start":1604317817523,"stop":1604317822524,"duration":5001},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрос transferbalance","time":{"start":1604317822524,"stop":1604317822532,"duration":8},"status":"failed","statusMessage":"AssertionError: assert ('1' == '-3'\n  - -3\n  + 1)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_transferbalance.py\", line 302, in test_transferbalance_5\n    assert \"1\" == transferbalance[\"result\"] and size_0 == transferbalance[\"size\"][0] and size_1 == transferbalance[\"size\"][1] and size_2 == transferbalance[\"size\"][2]\n","steps":[{"name":"Проверка ответа","time":{"start":1604317822532,"stop":1604317822532,"duration":0},"status":"failed","statusMessage":"AssertionError: assert ('1' == '-3'\n  - -3\n  + 1)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_transferbalance.py\", line 302, in test_transferbalance_5\n    assert \"1\" == transferbalance[\"result\"] and size_0 == transferbalance[\"size\"][0] and size_1 == transferbalance[\"size\"][1] and size_2 == transferbalance[\"size\"][2]\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"5ece977395fecbb8","name":"stdout","source":"5ece977395fecbb8.txt","type":"text/plain","size":169}],"parameters":[],"stepsCount":4,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"create_account::0","time":{"start":1604317822564,"stop":1604317822571,"duration":7},"status":"passed","steps":[{"name":"Удаление созданных аккаунтов","time":{"start":1604317822564,"stop":1604317822571,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"labels":[{"name":"severity","value":"blocker"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_transferbalance"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_transferbalance"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[{"uid":"ce5ca41ec55194f5","status":"failed","statusDetails":"AssertionError: assert ('1' == '-3'\n  - -3\n  + 1)","time":{"start":1604313580810,"stop":1604313585824,"duration":5014}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke"]},"source":"36079383254bc6c0.json","parameterValues":[]}