{"uid":"f0e94b1a89cae7d1","name":"Запрос getdealshistory: проверка работы","fullName":"Antelope.test_getdealshistory#test_getdealshistory_1","historyId":"bd467d674682fd0951e71611b69cdcb6","time":{"start":1604313222457,"stop":1604313222462,"duration":5},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n        Тест:\n            Шаг1: отправляем запрос на изменение данных о сделке\n            Шаг2: запрашиваем историю по необходимой сделке\n            Шаг3: проверка актуальных значений\n        Tear down:\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100.\n        - Пополняем баланс аккаунта\n        - Открываем на нём позицию.\n    Тест:\n        Шаг1: отправляем запрос на изменение данных о сделке\n        Шаг2: запрашиваем историю по необходимой сделке\n        Шаг3: проверка актуальных значений\n    Tear down:\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert ('193824' == '193825'\n  - 193825\n  ?      ^\n  + 193824\n  ?      ^)","statusTrace":"deal_history1 = {'from': 1604324010, 'to': 1604324032}\n\n    @allure.title(\"Запрос getdealshistory: проверка работы\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_getdealshistory_1(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n            Тест:\n                Шаг1: отправляем запрос на изменение данных о сделке\n                Шаг2: запрашиваем историю по необходимой сделке\n                Шаг3: проверка актуальных значений\n            Tear down:\n                - Удаление аккаунта\n        \"\"\"\n        getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n        with allure.step('Устанавливаем новые параметры'):\n            wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=getdealshistory_1['size'][0]['deal'], symbol = \"GBPUSD\")\n        with allure.step('Запрос getdealshistory - запрашиваем новые даные и проверяем их корректность'):\n            getdealshistory_2 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history1['from'], 'to':deal_history1['to']})\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос getdealshistory: \", getdealshistory_2)\n            with allure.step('Проверка ответа '):\n>               assert getdealshistory_1['size'][0]['deal'] == getdealshistory_2['size'][0]['deal'] and \"GBPUSD\" == getdealshistory_2['size'][0]['symbol']\nE               AssertionError: assert ('193824' == '193825'\nE                 - 193825\nE                 ?      ^\nE                 + 193824\nE                 ?      ^)\n\nAntelope\\test_getdealshistory.py:58: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"deal_history1","time":{"start":1604313205446,"stop":1604313222456,"duration":17010},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604313205446,"stop":1604313222456,"duration":17010},"status":"passed","steps":[{"name":"Вычисляем значение from","time":{"start":1604313205450,"stop":1604313221451,"duration":16001},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Начисление баланса на аккаунт","time":{"start":1604313221451,"stop":1604313222456,"duration":1005},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Вычисляем значение to","time":{"start":1604313222456,"stop":1604313222456,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n        Тест:\n            Шаг1: отправляем запрос на изменение данных о сделке\n            Шаг2: запрашиваем историю по необходимой сделке\n            Шаг3: проверка актуальных значений\n        Tear down:\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert ('193824' == '193825'\n  - 193825\n  ?      ^\n  + 193824\n  ?      ^)","statusTrace":"deal_history1 = {'from': 1604324010, 'to': 1604324032}\n\n    @allure.title(\"Запрос getdealshistory: проверка работы\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_getdealshistory_1(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n            Тест:\n                Шаг1: отправляем запрос на изменение данных о сделке\n                Шаг2: запрашиваем историю по необходимой сделке\n                Шаг3: проверка актуальных значений\n            Tear down:\n                - Удаление аккаунта\n        \"\"\"\n        getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n        with allure.step('Устанавливаем новые параметры'):\n            wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=getdealshistory_1['size'][0]['deal'], symbol = \"GBPUSD\")\n        with allure.step('Запрос getdealshistory - запрашиваем новые даные и проверяем их корректность'):\n            getdealshistory_2 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history1['from'], 'to':deal_history1['to']})\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос getdealshistory: \", getdealshistory_2)\n            with allure.step('Проверка ответа '):\n>               assert getdealshistory_1['size'][0]['deal'] == getdealshistory_2['size'][0]['deal'] and \"GBPUSD\" == getdealshistory_2['size'][0]['symbol']\nE               AssertionError: assert ('193824' == '193825'\nE                 - 193825\nE                 ?      ^\nE                 + 193824\nE                 ?      ^)\n\nAntelope\\test_getdealshistory.py:58: AssertionError","steps":[{"name":"Устанавливаем новые параметры","time":{"start":1604313222459,"stop":1604313222460,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрос getdealshistory - запрашиваем новые даные и проверяем их корректность","time":{"start":1604313222460,"stop":1604313222462,"duration":2},"status":"failed","statusMessage":"AssertionError: assert ('193824' == '193825'\n  - 193825\n  ?      ^\n  + 193824\n  ?      ^)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_getdealshistory.py\", line 58, in test_getdealshistory_1\n    assert getdealshistory_1['size'][0]['deal'] == getdealshistory_2['size'][0]['deal'] and \"GBPUSD\" == getdealshistory_2['size'][0]['symbol']\n","steps":[{"name":"Проверка ответа ","time":{"start":1604313222461,"stop":1604313222462,"duration":1},"status":"failed","statusMessage":"AssertionError: assert ('193824' == '193825'\n  - 193825\n  ?      ^\n  + 193824\n  ?      ^)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_getdealshistory.py\", line 58, in test_getdealshistory_1\n    assert getdealshistory_1['size'][0]['deal'] == getdealshistory_2['size'][0]['deal'] and \"GBPUSD\" == getdealshistory_2['size'][0]['symbol']\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"b37b44f85d152134","name":"stdout","source":"b37b44f85d152134.txt","type":"text/plain","size":4901}],"parameters":[],"stepsCount":3,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"deal_history1::0","time":{"start":1604313222475,"stop":1604313222477,"duration":2},"status":"passed","steps":[{"name":"Удаляем аккаунты","time":{"start":1604313222475,"stop":1604313222477,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"labels":[{"name":"severity","value":"blocker"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_getdealshistory"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"13344-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_getdealshistory"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["smoke"]},"source":"f0e94b1a89cae7d1.json","parameterValues":[]}