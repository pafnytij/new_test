{"uid":"5b6dab1e580139a","name":"Запрос bulkmodifydeal: в перечне есть несуществующая сделка.","fullName":"Antelope.test_bulkmodifydeal#test_bulkmodifydeal_4","historyId":"851d5a61875df7aab3ca05b77db7eef5","time":{"start":1604317163158,"stop":1604317163162,"duration":4},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n            Шаг2: Проверяем ответ\n            Ожидаемый ответ: result=1&reason=&size=42\n                             deals_1;\n                             &failed_deals=7894561230&request_id= \"\n            Шаг3: проверка работы запроса для существующей сделки\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100.\n        - Пополняем баланс аккаунта\n        - Открываем на нём позицию.\n        - Запрсоом getdealshistory находим номер нужной сделки.\n    Тест:\n        Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n        Шаг2: Проверяем ответ\n        Ожидаемый ответ: result=1&amp;reason=&amp;size=42\n                         deals_1;\n                         &amp;failed_deals=7894561230&amp;request_id= &quot;\n        Шаг3: проверка работы запроса для существующей сделки\n    Tear down:\n        - Закрытие сделки\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert ('194171' == '194172'\n  - 194172\n  ?      ^\n  + 194171\n  ?      ^)","statusTrace":"deal_history1 = {'deals_1': '194171', 'from': 1604327928, 'to': 1604327993}\n\n    @allure.title(\"Запрос bulkmodifydeal: в перечне есть несуществующая сделка.\")\n    @allure.severity('critical')\n    def test_bulkmodifydeal_4(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n                Шаг2: Проверяем ответ\n                Ожидаемый ответ: result=1&reason=&size=42\n                                 deals_1;\n                                 &failed_deals=7894561230&request_id= \"\n                Шаг3: проверка работы запроса для существующей сделки\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        deals = deal_history1['deals_1'] + \";7894561230\"\n        with allure.step('Запрос bulkmodifydeal с несуществующими данными в перечне в deals'):\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deals, symbol = \"GBPUSD\")\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal: \", bulkmodifydeal)\n            with allure.step('Проверка ответа'):\n                assert \"1\" == bulkmodifydeal['result'] and \"7894561230\" == bulkmodifydeal['failed_deals']\n            with allure.step('Проверка работы запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory',**{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n>               assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\nE               AssertionError: assert ('194171' == '194172'\nE                 - 194172\nE                 ?      ^\nE                 + 194171\nE                 ?      ^)\n\nAntelope\\test_bulkmodifydeal.py:204: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"deal_history1","time":{"start":1604317123145,"stop":1604317163157,"duration":40012},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317123145,"stop":1604317163157,"duration":40012},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317123148,"stop":1604317158151,"duration":35003},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем позиции","time":{"start":1604317158151,"stop":1604317163155,"duration":5004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрашиваем историю позиций за последние 10 секунд на аккаунте","time":{"start":1604317163155,"stop":1604317163157,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n            Шаг2: Проверяем ответ\n            Ожидаемый ответ: result=1&reason=&size=42\n                             deals_1;\n                             &failed_deals=7894561230&request_id= \"\n            Шаг3: проверка работы запроса для существующей сделки\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert ('194171' == '194172'\n  - 194172\n  ?      ^\n  + 194171\n  ?      ^)","statusTrace":"deal_history1 = {'deals_1': '194171', 'from': 1604327928, 'to': 1604327993}\n\n    @allure.title(\"Запрос bulkmodifydeal: в перечне есть несуществующая сделка.\")\n    @allure.severity('critical')\n    def test_bulkmodifydeal_4(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n                Шаг2: Проверяем ответ\n                Ожидаемый ответ: result=1&reason=&size=42\n                                 deals_1;\n                                 &failed_deals=7894561230&request_id= \"\n                Шаг3: проверка работы запроса для существующей сделки\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        deals = deal_history1['deals_1'] + \";7894561230\"\n        with allure.step('Запрос bulkmodifydeal с несуществующими данными в перечне в deals'):\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deals, symbol = \"GBPUSD\")\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal: \", bulkmodifydeal)\n            with allure.step('Проверка ответа'):\n                assert \"1\" == bulkmodifydeal['result'] and \"7894561230\" == bulkmodifydeal['failed_deals']\n            with allure.step('Проверка работы запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory',**{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n>               assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\nE               AssertionError: assert ('194171' == '194172'\nE                 - 194172\nE                 ?      ^\nE                 + 194171\nE                 ?      ^)\n\nAntelope\\test_bulkmodifydeal.py:204: AssertionError","steps":[{"name":"Запрос bulkmodifydeal с несуществующими данными в перечне в deals","time":{"start":1604317163158,"stop":1604317163162,"duration":4},"status":"failed","statusMessage":"AssertionError: assert ('194171' == '194172'\n  - 194172\n  ?      ^\n  + 194171\n  ?      ^)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 204, in test_bulkmodifydeal_4\n    assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\n","steps":[{"name":"Проверка ответа","time":{"start":1604317163160,"stop":1604317163160,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверка работы запроса","time":{"start":1604317163160,"stop":1604317163162,"duration":2},"status":"failed","statusMessage":"AssertionError: assert ('194171' == '194172'\n  - 194172\n  ?      ^\n  + 194171\n  ?      ^)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 204, in test_bulkmodifydeal_4\n    assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"363f1a58e0f6d58f","name":"stdout","source":"363f1a58e0f6d58f.txt","type":"text/plain","size":154}],"parameters":[],"stepsCount":3,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"deal_history1::0","time":{"start":1604317163189,"stop":1604317169192,"duration":6003},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"severity","value":"critical"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_bulkmodifydeal"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_bulkmodifydeal"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"7c77ac488b6ab309","status":"failed","statusDetails":"AssertionError: assert ('193762' == '193763'\n  - 193763\n  ?      ^\n  + 193762\n  ?      ^)","time":{"start":1604312925696,"stop":1604312925700,"duration":4}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"5b6dab1e580139a.json","parameterValues":[]}