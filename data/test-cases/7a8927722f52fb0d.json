{"uid":"7a8927722f52fb0d","name":"Запрос changedealcommission: проверка работы.","fullName":"Antelope.test_changedealcommission#test_changedealcommission_1","historyId":"6d6cb8dc78663461b9a6064032c14a24","time":{"start":1604317307438,"stop":1604317307444,"duration":6},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: Рассчитываем новую комиссию для сделки\n            Шаг2: устанавливаем новую комиссию\n            Шаг3: запрашиваем историю по необходимой сделке и сверяем данные\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100.\n        - Пополняем баланс аккаунта\n        - Открываем на нём позицию.\n        - Запрсоом getdealshistory находим номер нужной сделки.\n    Тест:\n        Шаг1: Рассчитываем новую комиссию для сделки\n        Шаг2: устанавливаем новую комиссию\n        Шаг3: запрашиваем историю по необходимой сделке и сверяем данные\n    Tear down:\n        - Закрытие сделки\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert '0' == '10'\n  - 10\n  + 0","statusTrace":"deal_history = {'deal_comission': '0', 'deals': '194183', 'from': 1604328076, 'to': 1604328127}\n\n    @allure.title(\"Запрос changedealcommission: проверка работы.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_changedealcommission_1(deal_history):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: Рассчитываем новую комиссию для сделки\n                Шаг2: устанавливаем новую комиссию\n                Шаг3: запрашиваем историю по необходимой сделке и сверяем данные\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        with allure.step('Расчитываем новую комиссию для сделки'):\n            new_comission = str(int(deal_history['deal_comission']) + 10)\n        with allure.step('Запросом changedealcommission устанавливаем комиссию'):\n            changedealcommission = wik5.request(wik_mt5_addr,'changedealcommission', deal=deal_history['deals'], value= new_comission)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос changedealcommission: \", changedealcommission)\n            with allure.step('Проверяем работу запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history['from'], 'to':deal_history['to']})\n>               assert getdealshistory_1['size'][0]['commission'] == new_comission\nE               AssertionError: assert '0' == '10'\nE                 - 10\nE                 + 0\n\nAntelope\\test_changedealcommission.py:65: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"deal_history","time":{"start":1604317266426,"stop":1604317307437,"duration":41011},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317266426,"stop":1604317307437,"duration":41011},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317266428,"stop":1604317297433,"duration":31005},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем позиции","time":{"start":1604317297433,"stop":1604317307437,"duration":10004},"status":"passed","steps":[{"name":"Запрашиваем историю позиций за последние 10 секунд на аккаунте","time":{"start":1604317307435,"stop":1604317307435,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: Рассчитываем новую комиссию для сделки\n            Шаг2: устанавливаем новую комиссию\n            Шаг3: запрашиваем историю по необходимой сделке и сверяем данные\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert '0' == '10'\n  - 10\n  + 0","statusTrace":"deal_history = {'deal_comission': '0', 'deals': '194183', 'from': 1604328076, 'to': 1604328127}\n\n    @allure.title(\"Запрос changedealcommission: проверка работы.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_changedealcommission_1(deal_history):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: Рассчитываем новую комиссию для сделки\n                Шаг2: устанавливаем новую комиссию\n                Шаг3: запрашиваем историю по необходимой сделке и сверяем данные\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        with allure.step('Расчитываем новую комиссию для сделки'):\n            new_comission = str(int(deal_history['deal_comission']) + 10)\n        with allure.step('Запросом changedealcommission устанавливаем комиссию'):\n            changedealcommission = wik5.request(wik_mt5_addr,'changedealcommission', deal=deal_history['deals'], value= new_comission)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос changedealcommission: \", changedealcommission)\n            with allure.step('Проверяем работу запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history['from'], 'to':deal_history['to']})\n>               assert getdealshistory_1['size'][0]['commission'] == new_comission\nE               AssertionError: assert '0' == '10'\nE                 - 10\nE                 + 0\n\nAntelope\\test_changedealcommission.py:65: AssertionError","steps":[{"name":"Расчитываем новую комиссию для сделки","time":{"start":1604317307438,"stop":1604317307438,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запросом changedealcommission устанавливаем комиссию","time":{"start":1604317307438,"stop":1604317307444,"duration":6},"status":"failed","statusMessage":"AssertionError: assert '0' == '10'\n  - 10\n  + 0\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_changedealcommission.py\", line 65, in test_changedealcommission_1\n    assert getdealshistory_1['size'][0]['commission'] == new_comission\n","steps":[{"name":"Проверяем работу запроса","time":{"start":1604317307441,"stop":1604317307443,"duration":2},"status":"failed","statusMessage":"AssertionError: assert '0' == '10'\n  - 10\n  + 0\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_changedealcommission.py\", line 65, in test_changedealcommission_1\n    assert getdealshistory_1['size'][0]['commission'] == new_comission\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"b3c7b1417f258398","name":"stdout","source":"b3c7b1417f258398.txt","type":"text/plain","size":118}],"parameters":[],"stepsCount":3,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"deal_history::0","time":{"start":1604317307453,"stop":1604317308457,"duration":1004},"status":"passed","steps":[{"name":"Удаление созданных аккаунтов","time":{"start":1604317307453,"stop":1604317308457,"duration":1004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"labels":[{"name":"severity","value":"blocker"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_changedealcommission"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_changedealcommission"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[{"uid":"37ad91c5ade5fda7","status":"failed","statusDetails":"AssertionError: assert '0' == '10'\n  - 10\n  + 0","time":{"start":1604313069969,"stop":1604313069974,"duration":5}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke"]},"source":"7a8927722f52fb0d.json","parameterValues":[]}