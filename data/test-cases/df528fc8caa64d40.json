{"uid":"df528fc8caa64d40","name":"Запрос bulkmodifydeal: в перечне есть некорректное значение.","fullName":"Antelope.test_bulkmodifydeal#test_bulkmodifydeal_6","historyId":"688a860b08ac7d7356b6e66ba1b52a4f","time":{"start":1604317209214,"stop":1604317209218,"duration":4},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n            Шаг2: Проверяем ответ\n            Ожидаемый ответ: result=1&reason=&size=42\n                             deals_1;\n                             &failed_deals=7894561230&request_id= \"\n            Шаг3: проверка работы запроса для существующей сделки\n\n            Шаг4: отправляем запрос bulkmodifydeal с  deals=7895456184;asd\n            Ожидаемый ответ: result=-4&reason=&failed_deals=7895456184;asd&request_id=\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100.\n        - Пополняем баланс аккаунта\n        - Открываем на нём позицию.\n        - Запрсоом getdealshistory находим номер нужной сделки.\n    Тест:\n        Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n        Шаг2: Проверяем ответ\n        Ожидаемый ответ: result=1&amp;reason=&amp;size=42\n                         deals_1;\n                         &amp;failed_deals=7894561230&amp;request_id= &quot;\n        Шаг3: проверка работы запроса для существующей сделки\n\n        Шаг4: отправляем запрос bulkmodifydeal с  deals=7895456184;asd\n        Ожидаемый ответ: result=-4&amp;reason=&amp;failed_deals=7895456184;asd&amp;request_id=\n    Tear down:\n        - Закрытие сделки\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert ('194174' == '194175'\n  - 194175\n  ?      ^\n  + 194174\n  ?      ^)","statusTrace":"deal_history1 = {'deals_1': '194174', 'from': 1604327974, 'to': 1604328039}\n\n    @allure.title(\"Запрос bulkmodifydeal: в перечне есть некорректное значение.\")\n    @allure.severity('critical')\n    def test_bulkmodifydeal_6(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n                Шаг2: Проверяем ответ\n                Ожидаемый ответ: result=1&reason=&size=42\n                                 deals_1;\n                                 &failed_deals=7894561230&request_id= \"\n                Шаг3: проверка работы запроса для существующей сделки\n    \n                Шаг4: отправляем запрос bulkmodifydeal с  deals=7895456184;asd\n                Ожидаемый ответ: result=-4&reason=&failed_deals=7895456184;asd&request_id=\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        deals = deal_history1['deals_1'] + \";asd\"\n        with allure.step('Запрос bulkmodifydeal с несуществующими данными в перечне в deals'):\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deals, symbol = \"GBPUSD\")\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal шаг1: \", bulkmodifydeal)\n            with allure.step('Проверка ответа'):\n                assert \"1\" == bulkmodifydeal['result'] and \"asd\" == bulkmodifydeal['failed_deals']\n            with allure.step('Проверка работы запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory',**{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n>               assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\nE               AssertionError: assert ('194174' == '194175'\nE                 - 194175\nE                 ?      ^\nE                 + 194174\nE                 ?      ^)\n\nAntelope\\test_bulkmodifydeal.py:259: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"deal_history1","time":{"start":1604317169201,"stop":1604317209213,"duration":40012},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317169201,"stop":1604317209213,"duration":40012},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317169204,"stop":1604317204207,"duration":35003},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем позиции","time":{"start":1604317204207,"stop":1604317209211,"duration":5004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрашиваем историю позиций за последние 10 секунд на аккаунте","time":{"start":1604317209211,"stop":1604317209213,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n            Шаг2: Проверяем ответ\n            Ожидаемый ответ: result=1&reason=&size=42\n                             deals_1;\n                             &failed_deals=7894561230&request_id= \"\n            Шаг3: проверка работы запроса для существующей сделки\n\n            Шаг4: отправляем запрос bulkmodifydeal с  deals=7895456184;asd\n            Ожидаемый ответ: result=-4&reason=&failed_deals=7895456184;asd&request_id=\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert ('194174' == '194175'\n  - 194175\n  ?      ^\n  + 194174\n  ?      ^)","statusTrace":"deal_history1 = {'deals_1': '194174', 'from': 1604327974, 'to': 1604328039}\n\n    @allure.title(\"Запрос bulkmodifydeal: в перечне есть некорректное значение.\")\n    @allure.severity('critical')\n    def test_bulkmodifydeal_6(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос bulkmodifydeal с несуществующими данными в перечне в deals\n                Шаг2: Проверяем ответ\n                Ожидаемый ответ: result=1&reason=&size=42\n                                 deals_1;\n                                 &failed_deals=7894561230&request_id= \"\n                Шаг3: проверка работы запроса для существующей сделки\n    \n                Шаг4: отправляем запрос bulkmodifydeal с  deals=7895456184;asd\n                Ожидаемый ответ: result=-4&reason=&failed_deals=7895456184;asd&request_id=\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        deals = deal_history1['deals_1'] + \";asd\"\n        with allure.step('Запрос bulkmodifydeal с несуществующими данными в перечне в deals'):\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deals, symbol = \"GBPUSD\")\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal шаг1: \", bulkmodifydeal)\n            with allure.step('Проверка ответа'):\n                assert \"1\" == bulkmodifydeal['result'] and \"asd\" == bulkmodifydeal['failed_deals']\n            with allure.step('Проверка работы запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory',**{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n>               assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\nE               AssertionError: assert ('194174' == '194175'\nE                 - 194175\nE                 ?      ^\nE                 + 194174\nE                 ?      ^)\n\nAntelope\\test_bulkmodifydeal.py:259: AssertionError","steps":[{"name":"Запрос bulkmodifydeal с несуществующими данными в перечне в deals","time":{"start":1604317209214,"stop":1604317209218,"duration":4},"status":"failed","statusMessage":"AssertionError: assert ('194174' == '194175'\n  - 194175\n  ?      ^\n  + 194174\n  ?      ^)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 259, in test_bulkmodifydeal_6\n    assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\n","steps":[{"name":"Проверка ответа","time":{"start":1604317209216,"stop":1604317209216,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверка работы запроса","time":{"start":1604317209216,"stop":1604317209218,"duration":2},"status":"failed","statusMessage":"AssertionError: assert ('194174' == '194175'\n  - 194175\n  ?      ^\n  + 194174\n  ?      ^)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 259, in test_bulkmodifydeal_6\n    assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal'] and \"GBPUSD\" ==  getdealshistory_1['size'][0]['symbol']\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"d7741b749bc1a32f","name":"stdout","source":"d7741b749bc1a32f.txt","type":"text/plain","size":155}],"parameters":[],"stepsCount":3,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"deal_history1::0","time":{"start":1604317209236,"stop":1604317215240,"duration":6004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"severity","value":"critical"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_bulkmodifydeal"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_bulkmodifydeal"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"8cbff1281035b2e6","status":"failed","statusDetails":"AssertionError: assert ('193765' == '193766'\n  - 193766\n  ?      ^\n  + 193765\n  ?      ^)","time":{"start":1604312971754,"stop":1604312971758,"duration":4}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"df528fc8caa64d40.json","parameterValues":[]}