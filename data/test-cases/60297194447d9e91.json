{"uid":"60297194447d9e91","name":"Запрос bulkmodifydeal: проверка работы, перечень.","fullName":"Antelope.test_bulkmodifydeal#test_bulkmodifydeal_2","historyId":"d9a0c4d245ce4357163c09007cf4eee1","time":{"start":1604317117109,"stop":1604317117114,"duration":5},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос на изменение данных о сделках\n            Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100.\n        - Пополняем баланс аккаунта\n        - Открываем на нём позицию.\n        - Запрсоом getdealshistory находим номер нужной сделки.\n    Тест:\n        Шаг1: отправляем запрос на изменение данных о сделках\n        Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n    Tear down:\n        - Закрытие сделки\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert ('GBPUSD' == 'EURUSD'\n  - EURUSD\n  + GBPUSD)","statusTrace":"deal_history2 = {'deals_1': '194167', 'deals_2': '194168', 'from': 1604327887, 'to': 1604327947}\n\n    @allure.title(\"Запрос bulkmodifydeal: проверка работы, перечень.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_bulkmodifydeal_2(deal_history2):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос на изменение данных о сделках\n                Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        deals = deal_history2['deals_1'] + \";\" + deal_history2['deals_2']\n        with allure.step('Запросом bulkmodifydeal устанавливаем новые параметры'):\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deals, symbol = \"GBPUSD\")\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal: \", bulkmodifydeal)\n            with allure.step('Проверка работы запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history2['from'], 'to':deal_history2['to']})\n>               assert \"GBPUSD\" == getdealshistory_1['size'][0]['symbol'] and \"GBPUSD\" == getdealshistory_1['size'][1]['symbol']\nE               AssertionError: assert ('GBPUSD' == 'EURUSD'\nE                 - EURUSD\nE                 + GBPUSD)\n\nAntelope\\test_bulkmodifydeal.py:150: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"deal_history2","time":{"start":1604317077094,"stop":1604317117108,"duration":40014},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317077094,"stop":1604317117108,"duration":40014},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317077096,"stop":1604317112100,"duration":35004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем позиции","time":{"start":1604317112100,"stop":1604317117106,"duration":5006},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрашиваем историю позиций за последние 10 секунд на аккаунте","time":{"start":1604317117106,"stop":1604317117108,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос на изменение данных о сделках\n            Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert ('GBPUSD' == 'EURUSD'\n  - EURUSD\n  + GBPUSD)","statusTrace":"deal_history2 = {'deals_1': '194167', 'deals_2': '194168', 'from': 1604327887, 'to': 1604327947}\n\n    @allure.title(\"Запрос bulkmodifydeal: проверка работы, перечень.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_bulkmodifydeal_2(deal_history2):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос на изменение данных о сделках\n                Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n        deals = deal_history2['deals_1'] + \";\" + deal_history2['deals_2']\n        with allure.step('Запросом bulkmodifydeal устанавливаем новые параметры'):\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deals, symbol = \"GBPUSD\")\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal: \", bulkmodifydeal)\n            with allure.step('Проверка работы запроса'):\n                getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history2['from'], 'to':deal_history2['to']})\n>               assert \"GBPUSD\" == getdealshistory_1['size'][0]['symbol'] and \"GBPUSD\" == getdealshistory_1['size'][1]['symbol']\nE               AssertionError: assert ('GBPUSD' == 'EURUSD'\nE                 - EURUSD\nE                 + GBPUSD)\n\nAntelope\\test_bulkmodifydeal.py:150: AssertionError","steps":[{"name":"Запросом bulkmodifydeal устанавливаем новые параметры","time":{"start":1604317117109,"stop":1604317117114,"duration":5},"status":"failed","statusMessage":"AssertionError: assert ('GBPUSD' == 'EURUSD'\n  - EURUSD\n  + GBPUSD)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 150, in test_bulkmodifydeal_2\n    assert \"GBPUSD\" == getdealshistory_1['size'][0]['symbol'] and \"GBPUSD\" == getdealshistory_1['size'][1]['symbol']\n","steps":[{"name":"Проверка работы запроса","time":{"start":1604317117111,"stop":1604317117113,"duration":2},"status":"failed","statusMessage":"AssertionError: assert ('GBPUSD' == 'EURUSD'\n  - EURUSD\n  + GBPUSD)\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 150, in test_bulkmodifydeal_2\n    assert \"GBPUSD\" == getdealshistory_1['size'][0]['symbol'] and \"GBPUSD\" == getdealshistory_1['size'][1]['symbol']\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"d9da8ae2478cc114","name":"stdout","source":"d9da8ae2478cc114.txt","type":"text/plain","size":144}],"parameters":[],"stepsCount":2,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"deal_history2::0","time":{"start":1604317117131,"stop":1604317123135,"duration":6004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"severity","value":"blocker"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_bulkmodifydeal"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_bulkmodifydeal"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[{"uid":"e2ba93fe33c40291","status":"failed","statusDetails":"AssertionError: assert ('GBPUSD' == 'EURUSD'\n  - EURUSD\n  + GBPUSD)","time":{"start":1604312879649,"stop":1604312879654,"duration":5}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke"]},"source":"60297194447d9e91.json","parameterValues":[]}