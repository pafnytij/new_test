{"uid":"d8cf17a32afba540","name":"Запрос closeposition: параметр volume.","fullName":"Antelope.test_closeposition#test_closeposition_8","historyId":"91daa59dfd1c6e2c52ec42f02a502b0f","time":{"start":1604313159329,"stop":1604313159331,"duration":2},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100\n            - пополняем ему баланс на 10.000.\n            - открываем 2 позиции.\n\n        Тест:\n            Шаг1: отправляем запрос closeposition c параметром volume > volume сделки\n            Шаг2: проверяем ответ на запрос\n            Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                            pos1;\n                            &request_id=\" (сделка закрыта)\n            Шаг3: проверяем сделку\n            Шаг4: отправляем запрос closeposition c параметром volume < volume сделки\n            Шаг5: проверяем ответ на запрос\n            Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                            pos1;\n                            &request_id=\" (сделка частично закрыта)\n            Шаг6: проверяем сделку\n            Шаг7: отправляем запросом closeposition с некорректным значением в параметре volume.\n            Ожмдаемый ответ: result=-3&reason=parsing_problem&request_id=\n\n        Tear down: удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100\n        - пополняем ему баланс на 10.000.\n        - открываем 2 позиции.\n\n    Тест:\n        Шаг1: отправляем запрос closeposition c параметром volume &gt; volume сделки\n        Шаг2: проверяем ответ на запрос\n        Ожидаемый ответ:&quot;result=1&amp;reason=&amp;failed_position=asd&amp;size=8\n                        pos1;\n                        &amp;request_id=&quot; (сделка закрыта)\n        Шаг3: проверяем сделку\n        Шаг4: отправляем запрос closeposition c параметром volume &lt; volume сделки\n        Шаг5: проверяем ответ на запрос\n        Ожидаемый ответ:&quot;result=1&amp;reason=&amp;failed_position=asd&amp;size=8\n                        pos1;\n                        &amp;request_id=&quot; (сделка частично закрыта)\n        Шаг6: проверяем сделку\n        Шаг7: отправляем запросом closeposition с некорректным значением в параметре volume.\n        Ожмдаемый ответ: result=-3&amp;reason=parsing_problem&amp;request_id=\n\n    Tear down: удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1","statusTrace":"position_open = {'order1': '102820', 'order2': '102821'}\n\n    @allure.title(\"Запрос closeposition: параметр volume.\")\n    @allure.severity('normal')\n    def test_closeposition_8(position_open):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100\n                - пополняем ему баланс на 10.000.\n                - открываем 2 позиции.\n    \n            Тест:\n                Шаг1: отправляем запрос closeposition c параметром volume > volume сделки\n                Шаг2: проверяем ответ на запрос\n                Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                                pos1;\n                                &request_id=\" (сделка закрыта)\n                Шаг3: проверяем сделку\n                Шаг4: отправляем запрос closeposition c параметром volume < volume сделки\n                Шаг5: проверяем ответ на запрос\n                Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                                pos1;\n                                &request_id=\" (сделка частично закрыта)\n                Шаг6: проверяем сделку\n                Шаг7: отправляем запросом closeposition с некорректным значением в параметре volume.\n                Ожмдаемый ответ: result=-3&reason=parsing_problem&request_id=\n    \n            Tear down: удаление аккаунта\n        \"\"\"\n        with allure.step('Запрос closeposition c параметром volume > volume сделки.'):\n            closeposition = wik5.request(wik_mt5_addr, 'closeposition', position=position_open['order2'], volume=10000)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос closeposition шаг1: \", closeposition)\n            with allure.step('Проверка ответа.'):\n>               assert \"1\" == closeposition[\"result\"]\nE               AssertionError: assert '1' == '-4'\nE                 - -4\nE                 + 1\n\nAntelope\\test_closeposition.py:247: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"position_open","time":{"start":1604313159312,"stop":1604313159329,"duration":17},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604313159312,"stop":1604313159319,"duration":7},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604313159314,"stop":1604313159316,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем ордер","time":{"start":1604313159316,"stop":1604313159319,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100\n            - пополняем ему баланс на 10.000.\n            - открываем 2 позиции.\n\n        Тест:\n            Шаг1: отправляем запрос closeposition c параметром volume > volume сделки\n            Шаг2: проверяем ответ на запрос\n            Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                            pos1;\n                            &request_id=\" (сделка закрыта)\n            Шаг3: проверяем сделку\n            Шаг4: отправляем запрос closeposition c параметром volume < volume сделки\n            Шаг5: проверяем ответ на запрос\n            Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                            pos1;\n                            &request_id=\" (сделка частично закрыта)\n            Шаг6: проверяем сделку\n            Шаг7: отправляем запросом closeposition с некорректным значением в параметре volume.\n            Ожмдаемый ответ: result=-3&reason=parsing_problem&request_id=\n\n        Tear down: удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1","statusTrace":"position_open = {'order1': '102820', 'order2': '102821'}\n\n    @allure.title(\"Запрос closeposition: параметр volume.\")\n    @allure.severity('normal')\n    def test_closeposition_8(position_open):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100\n                - пополняем ему баланс на 10.000.\n                - открываем 2 позиции.\n    \n            Тест:\n                Шаг1: отправляем запрос closeposition c параметром volume > volume сделки\n                Шаг2: проверяем ответ на запрос\n                Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                                pos1;\n                                &request_id=\" (сделка закрыта)\n                Шаг3: проверяем сделку\n                Шаг4: отправляем запрос closeposition c параметром volume < volume сделки\n                Шаг5: проверяем ответ на запрос\n                Ожидаемый ответ:\"result=1&reason=&failed_position=asd&size=8\n                                pos1;\n                                &request_id=\" (сделка частично закрыта)\n                Шаг6: проверяем сделку\n                Шаг7: отправляем запросом closeposition с некорректным значением в параметре volume.\n                Ожмдаемый ответ: result=-3&reason=parsing_problem&request_id=\n    \n            Tear down: удаление аккаунта\n        \"\"\"\n        with allure.step('Запрос closeposition c параметром volume > volume сделки.'):\n            closeposition = wik5.request(wik_mt5_addr, 'closeposition', position=position_open['order2'], volume=10000)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос closeposition шаг1: \", closeposition)\n            with allure.step('Проверка ответа.'):\n>               assert \"1\" == closeposition[\"result\"]\nE               AssertionError: assert '1' == '-4'\nE                 - -4\nE                 + 1\n\nAntelope\\test_closeposition.py:247: AssertionError","steps":[{"name":"Запрос closeposition c параметром volume > volume сделки.","time":{"start":1604313159329,"stop":1604313159331,"duration":2},"status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_closeposition.py\", line 247, in test_closeposition_8\n    assert \"1\" == closeposition[\"result\"]\n","steps":[{"name":"Проверка ответа.","time":{"start":1604313159330,"stop":1604313159331,"duration":1},"status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_closeposition.py\", line 247, in test_closeposition_8\n    assert \"1\" == closeposition[\"result\"]\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"df50026bd541380a","name":"stdout","source":"df50026bd541380a.txt","type":"text/plain","size":192}],"parameters":[],"stepsCount":2,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"position_open::0","time":{"start":1604313159342,"stop":1604313160346,"duration":1004},"status":"passed","steps":[{"name":"Удаление созданных аккаунтов","time":{"start":1604313159342,"stop":1604313160346,"duration":1004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"labels":[{"name":"severity","value":"normal"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_closeposition"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"13344-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_closeposition"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"d8cf17a32afba540.json","parameterValues":[]}