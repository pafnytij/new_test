{"uid":"6dbbcbd7135300cf","name":"Запрос bulkmodifydeal: проверка работы дополнительных параметров.","fullName":"Antelope.test_bulkmodifydeal#test_bulkmodifydeal_1","historyId":"1af77f2033a0e04f654b6e3f1404a82c","time":{"start":1604317055958,"stop":1604317070983,"duration":15025},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос на изменение данных о сделке\n            Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n            Шаг3: отправляем запрос на изменение gateway_price - не отрабатывает\n            Шаг4: проверка установленных параметров\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт с логином 100.\n        - Пополняем баланс аккаунта\n        - Открываем на нём позицию.\n        - Запрсоом getdealshistory находим номер нужной сделки.\n    Тест:\n        Шаг1: отправляем запрос на изменение данных о сделке\n        Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n        Шаг3: отправляем запрос на изменение gateway_price - не отрабатывает\n        Шаг4: проверка установленных параметров\n    Tear down:\n        - Закрытие сделки\n        - Удаление аккаунта\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert '194145' == '194146'\n  - 194146\n  ?      ^\n  + 194145\n  ?      ^","statusTrace":"deal_history1 = {'deals_1': '194145', 'from': 1604327820, 'to': 1604327885}\n\n    @allure.title(\"Запрос bulkmodifydeal: проверка работы дополнительных параметров.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_bulkmodifydeal_1(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос на изменение данных о сделке\n                Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n                Шаг3: отправляем запрос на изменение gateway_price - не отрабатывает\n                Шаг4: проверка установленных параметров\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n    \n        getdealshistory_0 = wik5.request(wik_mt5_addr, 'getdealshistory',  **{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n        with allure.step('Запросом bulkmodifydeal устанавливаем новые параметры'):\n            wik5.request(wik_mt5_addr, 'addquote', symbol='GBPUSD', bid=0.5000, ask=0.5008)\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deal_history1['deals_1'], symbol = \"GBPUSD\", action_=1, entry=1,\n                         volume=200, price = 0.4000, profit_rate = 1000, commission=15, swap=1.51, profit=250,\n                         margin_rate=0.4587, comment=\"test_deals\", sl=0.600, tp = 0.300, reason=5, gateway_price=0.4001)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal: \", bulkmodifydeal)\n            time.sleep(15)\n        with allure.step('Проверяем работу запроса'):\n            getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history1['from'], 'to':deal_history1['to']})\n>           assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal']\nE           AssertionError: assert '194145' == '194146'\nE             - 194146\nE             ?      ^\nE             + 194145\nE             ?      ^\n\nAntelope\\test_bulkmodifydeal.py:101: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"deal_history1","time":{"start":1604317015926,"stop":1604317055957,"duration":40031},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317015926,"stop":1604317055957,"duration":40031},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317015929,"stop":1604317050933,"duration":35004},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Открываем позиции","time":{"start":1604317050933,"stop":1604317055938,"duration":5005},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрашиваем историю позиций за последние 10 секунд на аккаунте","time":{"start":1604317055938,"stop":1604317055957,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт с логином 100.\n            - Пополняем баланс аккаунта\n            - Открываем на нём позицию.\n            - Запрсоом getdealshistory находим номер нужной сделки.\n        Тест:\n            Шаг1: отправляем запрос на изменение данных о сделке\n            Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n            Шаг3: отправляем запрос на изменение gateway_price - не отрабатывает\n            Шаг4: проверка установленных параметров\n        Tear down:\n            - Закрытие сделки\n            - Удаление аккаунта\n    ","status":"failed","statusMessage":"AssertionError: assert '194145' == '194146'\n  - 194146\n  ?      ^\n  + 194145\n  ?      ^","statusTrace":"deal_history1 = {'deals_1': '194145', 'from': 1604327820, 'to': 1604327885}\n\n    @allure.title(\"Запрос bulkmodifydeal: проверка работы дополнительных параметров.\")\n    @allure.severity('blocker')\n    @pytest.mark.smoke\n    def test_bulkmodifydeal_1(deal_history1):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт с логином 100.\n                - Пополняем баланс аккаунта\n                - Открываем на нём позицию.\n                - Запрсоом getdealshistory находим номер нужной сделки.\n            Тест:\n                Шаг1: отправляем запрос на изменение данных о сделке\n                Шаг2: запрашиваем историю по необходимой сделке и сверяем данные\n                Шаг3: отправляем запрос на изменение gateway_price - не отрабатывает\n                Шаг4: проверка установленных параметров\n            Tear down:\n                - Закрытие сделки\n                - Удаление аккаунта\n        \"\"\"\n    \n        getdealshistory_0 = wik5.request(wik_mt5_addr, 'getdealshistory',  **{'login': 100, 'from': deal_history1['from'], 'to': deal_history1['to']})\n        with allure.step('Запросом bulkmodifydeal устанавливаем новые параметры'):\n            wik5.request(wik_mt5_addr, 'addquote', symbol='GBPUSD', bid=0.5000, ask=0.5008)\n            bulkmodifydeal = wik5.request(wik_mt5_addr,'bulkmodifydeal', deal=deal_history1['deals_1'], symbol = \"GBPUSD\", action_=1, entry=1,\n                         volume=200, price = 0.4000, profit_rate = 1000, commission=15, swap=1.51, profit=250,\n                         margin_rate=0.4587, comment=\"test_deals\", sl=0.600, tp = 0.300, reason=5, gateway_price=0.4001)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос bulkmodifydeal: \", bulkmodifydeal)\n            time.sleep(15)\n        with allure.step('Проверяем работу запроса'):\n            getdealshistory_1 = wik5.request(wik_mt5_addr, 'getdealshistory', **{'login': 100, 'from':deal_history1['from'], 'to':deal_history1['to']})\n>           assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal']\nE           AssertionError: assert '194145' == '194146'\nE             - 194146\nE             ?      ^\nE             + 194145\nE             ?      ^\n\nAntelope\\test_bulkmodifydeal.py:101: AssertionError","steps":[{"name":"Запросом bulkmodifydeal устанавливаем новые параметры","time":{"start":1604317055960,"stop":1604317070978,"duration":15018},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем работу запроса","time":{"start":1604317070978,"stop":1604317070982,"duration":4},"status":"failed","statusMessage":"AssertionError: assert '194145' == '194146'\n  - 194146\n  ?      ^\n  + 194145\n  ?      ^\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_bulkmodifydeal.py\", line 101, in test_bulkmodifydeal_1\n    assert deal_history1['deals_1'] == getdealshistory_1['size'][0]['deal']\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[{"uid":"7d644ba447907da9","name":"stdout","source":"7d644ba447907da9.txt","type":"text/plain","size":144}],"parameters":[],"stepsCount":2,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"deal_history1::0","time":{"start":1604317071087,"stop":1604317077090,"duration":6003},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"severity","value":"blocker"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_bulkmodifydeal"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_bulkmodifydeal"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[{"uid":"aa1c2a0eeccc2f1a","status":"failed","statusDetails":"AssertionError: assert '193736' == '193737'\n  - 193737\n  ?      ^\n  + 193736\n  ?      ^","time":{"start":1604312818493,"stop":1604312833524,"duration":15031}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["smoke"]},"source":"6dbbcbd7135300cf.json","parameterValues":[]}