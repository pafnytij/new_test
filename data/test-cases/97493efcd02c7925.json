{"uid":"97493efcd02c7925","name":"Запрос modifyposition: проверка работы параметров sl/tp.","fullName":"Antelope.test_modifyposition#test_modifyposition_5","historyId":"9f807c7db1d25285601faa9797f892c0","time":{"start":1604317739965,"stop":1604317740971,"duration":1006},"description":"\n    Описание шагов:\n        Setup: создаём аккаунт 100\n             - пополняем баланс\n             - вбрасываем котировку\n             - открываем позицию\n        Тест:\n            Шаг1: отправляем запрос modifyposition с sl>price cmd=0\n            Шаг2: отправляем запрос modifyposition с sl<price cmd=1\n            Шаг3: отправляем запрос modifyposition с tp<price cmd=0\n            Шаг4: отправляем запрос modifyposition с tp>price cmd=1\n            Шаг5: отправляем запрос modifyposition с sl=tp=price\n            Ожидаемый ответ: result=1&reason=&request_id=\n        Tear down: закрываем позицию.\n             - удаляем аккаунт\n    ","descriptionHtml":"<pre><code>Описание шагов:\n    Setup: создаём аккаунт 100\n         - пополняем баланс\n         - вбрасываем котировку\n         - открываем позицию\n    Тест:\n        Шаг1: отправляем запрос modifyposition с sl&gt;price cmd=0\n        Шаг2: отправляем запрос modifyposition с sl&lt;price cmd=1\n        Шаг3: отправляем запрос modifyposition с tp&lt;price cmd=0\n        Шаг4: отправляем запрос modifyposition с tp&gt;price cmd=1\n        Шаг5: отправляем запрос modifyposition с sl=tp=price\n        Ожидаемый ответ: result=1&amp;reason=&amp;request_id=\n    Tear down: закрываем позицию.\n         - удаляем аккаунт\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1","statusTrace":"open_position = {'position': '103059'}\n\n    @allure.title(\"Запрос modifyposition: проверка работы параметров sl/tp.\")\n    @allure.severity('normal')\n    def test_modifyposition_5(open_position):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт 100\n                 - пополняем баланс\n                 - вбрасываем котировку\n                 - открываем позицию\n            Тест:\n                Шаг1: отправляем запрос modifyposition с sl>price cmd=0\n                Шаг2: отправляем запрос modifyposition с sl<price cmd=1\n                Шаг3: отправляем запрос modifyposition с tp<price cmd=0\n                Шаг4: отправляем запрос modifyposition с tp>price cmd=1\n                Шаг5: отправляем запрос modifyposition с sl=tp=price\n                Ожидаемый ответ: result=1&reason=&request_id=\n            Tear down: закрываем позицию.\n                 - удаляем аккаунт\n        \"\"\"\n        with allure.step('Запрос modifyposition с sl>price cmd=0'):\n            modifyposition = wik5.request(wik_mt5_addr, 'modifyposition', position=open_position[\"position\"], sl=1.2,tp=1.5)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос modifyposition: \", modifyposition)\n            with allure.step('Проверка ответа'):\n                assert '1' == modifyposition['result']\n        with allure.step('Запрос openorder с cmd = 1'):\n            openorder_cmd1_1 = wik5.request(wik_mt5_addr, 'openorder', login=100, symbol=\"EURUSD\", cmd=1, volume=100, price=1.000)\n            time.sleep(1)\n        with allure.step('Запрос modifyposition с sl<price cmd=1'):\n            modifyposition = wik5.request(wik_mt5_addr, 'modifyposition', position=openorder_cmd1_1[\"orderid\"], sl=0.8, tp=0.5)\n            with allure.step('Проверка ответа'):\n>               assert '1' == modifyposition['result']\nE               AssertionError: assert '1' == '-4'\nE                 - -4\nE                 + 1\n\nAntelope\\test_modifyposition.py:200: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"open_position","time":{"start":1604317738946,"stop":1604317739965,"duration":1019},"status":"passed","steps":[{"name":"Создаем аккаунт","time":{"start":1604317738946,"stop":1604317739954,"duration":1008},"status":"passed","steps":[{"name":"Начисление баланса на аккаунт","time":{"start":1604317738948,"stop":1604317738950,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Вбрасываем котировку","time":{"start":1604317738950,"stop":1604317739952,"duration":1002},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрос openorder с cmd = 0","time":{"start":1604317739952,"stop":1604317739954,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"testStage":{"description":"\n    Описание шагов:\n        Setup: создаём аккаунт 100\n             - пополняем баланс\n             - вбрасываем котировку\n             - открываем позицию\n        Тест:\n            Шаг1: отправляем запрос modifyposition с sl>price cmd=0\n            Шаг2: отправляем запрос modifyposition с sl<price cmd=1\n            Шаг3: отправляем запрос modifyposition с tp<price cmd=0\n            Шаг4: отправляем запрос modifyposition с tp>price cmd=1\n            Шаг5: отправляем запрос modifyposition с sl=tp=price\n            Ожидаемый ответ: result=1&reason=&request_id=\n        Tear down: закрываем позицию.\n             - удаляем аккаунт\n    ","status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1","statusTrace":"open_position = {'position': '103059'}\n\n    @allure.title(\"Запрос modifyposition: проверка работы параметров sl/tp.\")\n    @allure.severity('normal')\n    def test_modifyposition_5(open_position):\n        \"\"\"\n        Описание шагов:\n            Setup: создаём аккаунт 100\n                 - пополняем баланс\n                 - вбрасываем котировку\n                 - открываем позицию\n            Тест:\n                Шаг1: отправляем запрос modifyposition с sl>price cmd=0\n                Шаг2: отправляем запрос modifyposition с sl<price cmd=1\n                Шаг3: отправляем запрос modifyposition с tp<price cmd=0\n                Шаг4: отправляем запрос modifyposition с tp>price cmd=1\n                Шаг5: отправляем запрос modifyposition с sl=tp=price\n                Ожидаемый ответ: result=1&reason=&request_id=\n            Tear down: закрываем позицию.\n                 - удаляем аккаунт\n        \"\"\"\n        with allure.step('Запрос modifyposition с sl>price cmd=0'):\n            modifyposition = wik5.request(wik_mt5_addr, 'modifyposition', position=open_position[\"position\"], sl=1.2,tp=1.5)\n            # Данные для отчёта: stdout\n            print(\"Ответ на запрос modifyposition: \", modifyposition)\n            with allure.step('Проверка ответа'):\n                assert '1' == modifyposition['result']\n        with allure.step('Запрос openorder с cmd = 1'):\n            openorder_cmd1_1 = wik5.request(wik_mt5_addr, 'openorder', login=100, symbol=\"EURUSD\", cmd=1, volume=100, price=1.000)\n            time.sleep(1)\n        with allure.step('Запрос modifyposition с sl<price cmd=1'):\n            modifyposition = wik5.request(wik_mt5_addr, 'modifyposition', position=openorder_cmd1_1[\"orderid\"], sl=0.8, tp=0.5)\n            with allure.step('Проверка ответа'):\n>               assert '1' == modifyposition['result']\nE               AssertionError: assert '1' == '-4'\nE                 - -4\nE                 + 1\n\nAntelope\\test_modifyposition.py:200: AssertionError","steps":[{"name":"Запрос modifyposition с sl>price cmd=0","time":{"start":1604317739965,"stop":1604317739967,"duration":2},"status":"passed","steps":[{"name":"Проверка ответа","time":{"start":1604317739967,"stop":1604317739967,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},{"name":"Запрос openorder с cmd = 1","time":{"start":1604317739967,"stop":1604317740969,"duration":1002},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Запрос modifyposition с sl<price cmd=1","time":{"start":1604317740969,"stop":1604317740970,"duration":1},"status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_modifyposition.py\", line 200, in test_modifyposition_5\n    assert '1' == modifyposition['result']\n","steps":[{"name":"Проверка ответа","time":{"start":1604317740970,"stop":1604317740970,"duration":0},"status":"failed","statusMessage":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1\n","statusTrace":"  File \"C:\\Users\\Pavel Starovoitov.TFBDEV\\PycharmProjects\\wikmt5_antelope\\Antelope\\test_modifyposition.py\", line 200, in test_modifyposition_5\n    assert '1' == modifyposition['result']\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"aa2596d1ebcc1af9","name":"stdout","source":"aa2596d1ebcc1af9.txt","type":"text/plain","size":94}],"parameters":[],"stepsCount":5,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"open_position::0","time":{"start":1604317740982,"stop":1604317740984,"duration":2},"status":"passed","steps":[{"name":"Удаление созданных аккаунтов","time":{"start":1604317740982,"stop":1604317740984,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true}],"labels":[{"name":"severity","value":"normal"},{"name":"parentSuite","value":"Antelope"},{"name":"suite","value":"test_modifyposition"},{"name":"host","value":"WKST-T-5"},{"name":"thread","value":"8604-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Antelope.test_modifyposition"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5f64cde1f68a52c6","status":"failed","statusDetails":"AssertionError: assert '1' == '-4'\n  - -4\n  + 1","time":{"start":1604313503298,"stop":1604313504304,"duration":1006}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"97493efcd02c7925.json","parameterValues":[]}